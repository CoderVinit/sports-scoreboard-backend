'use strict';

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface, Sequelize) {
    const now = new Date();

    // Innings for Match 1 (Completed)
    await queryInterface.bulkInsert('innings', [
      {
        id: 1,
        match_id: 1,
        batting_team_id: 1,
        bowling_team_id: 2,
        innings_number: 1,
        total_runs: 185,
        total_wickets: 5,
        total_overs: 20.0,
        extras: 12,
        wides: 6,
        no_balls: 3,
        byes: 2,
        leg_byes: 1,
        penalties: 0,
        run_rate: 9.25,
        status: 'completed',
        created_at: now,
        updated_at: now
      },
      {
        id: 2,
        match_id: 1,
        batting_team_id: 2,
        bowling_team_id: 1,
        innings_number: 2,
        total_runs: 170,
        total_wickets: 9,
        total_overs: 20.0,
        extras: 8,
        wides: 5,
        no_balls: 2,
        byes: 1,
        leg_byes: 0,
        penalties: 0,
        run_rate: 8.50,
        target: 186,
        required_run_rate: 9.30,
        status: 'completed',
        created_at: now,
        updated_at: now
      },
      // Innings for Match 2 (Completed)
      {
        id: 3,
        match_id: 2,
        batting_team_id: 1,
        bowling_team_id: 2,
        innings_number: 1,
        total_runs: 165,
        total_wickets: 7,
        total_overs: 20.0,
        extras: 10,
        wides: 4,
        no_balls: 3,
        byes: 2,
        leg_byes: 1,
        penalties: 0,
        run_rate: 8.25,
        status: 'completed',
        created_at: now,
        updated_at: now
      },
      {
        id: 4,
        match_id: 2,
        batting_team_id: 2,
        bowling_team_id: 1,
        innings_number: 2,
        total_runs: 168,
        total_wickets: 4,
        total_overs: 18.4,
        extras: 9,
        wides: 5,
        no_balls: 2,
        byes: 1,
        leg_byes: 1,
        penalties: 0,
        run_rate: 8.99,
        target: 166,
        required_run_rate: 8.30,
        status: 'completed',
        created_at: now,
        updated_at: now
      },
      // Innings for Match 3 (Live - 1st innings in progress)
      {
        id: 5,
        match_id: 3,
        batting_team_id: 2,
        bowling_team_id: 1,
        innings_number: 1,
        total_runs: 78,
        total_wickets: 2,
        total_overs: 10.3,
        extras: 5,
        wides: 3,
        no_balls: 1,
        byes: 1,
        leg_byes: 0,
        penalties: 0,
        run_rate: 7.43,
        status: 'in_progress',
        created_at: now,
        updated_at: now
      }
    ], {});

    // Sample balls for Match 1, Innings 1 (First over)
    await queryInterface.bulkInsert('balls', [
      {
        id: 1,
        match_id: 1,
        innings_id: 1,
        over_number: 1,
        ball_number: 1,
        batsman_id: 1,
        non_striker_id: 2,
        bowler_id: 9,
        runs: 0,
        extras: 0,
        extra_type: 'none',
        is_wicket: false,
        is_boundary: false,
        commentary: 'Good length delivery, defended',
        ball_speed: 142.5,
        created_at: now,
        updated_at: now
      },
      {
        id: 2,
        match_id: 1,
        innings_id: 1,
        over_number: 1,
        ball_number: 2,
        batsman_id: 1,
        non_striker_id: 2,
        bowler_id: 9,
        runs: 4,
        extras: 0,
        extra_type: 'none',
        is_wicket: false,
        is_boundary: true,
        boundary_type: 'four',
        shot_type: 'cover drive',
        commentary: 'Beautiful cover drive for a boundary!',
        ball_speed: 140.2,
        created_at: now,
        updated_at: now
      },
      {
        id: 3,
        match_id: 1,
        innings_id: 1,
        over_number: 1,
        ball_number: 3,
        batsman_id: 1,
        non_striker_id: 2,
        bowler_id: 9,
        runs: 1,
        extras: 0,
        extra_type: 'none',
        is_wicket: false,
        is_boundary: false,
        shot_type: 'push to mid-on',
        commentary: 'Single taken to mid-on',
        ball_speed: 138.8,
        created_at: now,
        updated_at: now
      },
      {
        id: 4,
        match_id: 1,
        innings_id: 1,
        over_number: 1,
        ball_number: 4,
        batsman_id: 2,
        non_striker_id: 1,
        bowler_id: 9,
        runs: 6,
        extras: 0,
        extra_type: 'none',
        is_wicket: false,
        is_boundary: true,
        boundary_type: 'six',
        shot_type: 'pull shot',
        commentary: 'Massive pull shot over mid-wicket for SIX!',
        ball_speed: 144.1,
        created_at: now,
        updated_at: now
      },
      {
        id: 5,
        match_id: 1,
        innings_id: 1,
        over_number: 1,
        ball_number: 5,
        batsman_id: 2,
        non_striker_id: 1,
        bowler_id: 9,
        runs: 0,
        extras: 1,
        extra_type: 'wide',
        is_wicket: false,
        is_boundary: false,
        commentary: 'Wide down the leg side',
        ball_speed: 141.3,
        created_at: now,
        updated_at: now
      },
      {
        id: 6,
        match_id: 1,
        innings_id: 1,
        over_number: 1,
        ball_number: 5,
        batsman_id: 2,
        non_striker_id: 1,
        bowler_id: 9,
        runs: 2,
        extras: 0,
        extra_type: 'none',
        is_wicket: false,
        is_boundary: false,
        shot_type: 'flick',
        commentary: 'Nicely flicked for two runs',
        ball_speed: 139.7,
        created_at: now,
        updated_at: now
      },
      {
        id: 7,
        match_id: 1,
        innings_id: 1,
        over_number: 1,
        ball_number: 6,
        batsman_id: 2,
        non_striker_id: 1,
        bowler_id: 9,
        runs: 1,
        extras: 0,
        extra_type: 'none',
        is_wicket: false,
        is_boundary: false,
        shot_type: 'push',
        commentary: 'Single to keep strike',
        ball_speed: 140.5,
        created_at: now,
        updated_at: now
      }
    ], {});

    // Player Match Stats for Match 1
    await queryInterface.bulkInsert('player_match_stats', [
      {
        id: 1,
        match_id: 1,
        player_id: 1,
        team_id: 1,
        innings_id: 1,
        runs_scored: 72,
        balls_faced: 45,
        fours: 8,
        sixes: 3,
        strike_rate: 160.00,
        is_out: false,
        overs_bowled: 0,
        runs_conceded: 0,
        wickets_taken: 0,
        catches: 1,
        batting_position: 1,
        is_playing: true,
        created_at: now,
        updated_at: now
      },
      {
        id: 2,
        match_id: 1,
        player_id: 2,
        team_id: 1,
        innings_id: 1,
        runs_scored: 58,
        balls_faced: 38,
        fours: 5,
        sixes: 2,
        strike_rate: 152.63,
        is_out: true,
        dismissal_type: 'caught',
        overs_bowled: 2.0,
        runs_conceded: 18,
        wickets_taken: 1,
        catches: 0,
        batting_position: 2,
        is_playing: true,
        created_at: now,
        updated_at: now
      },
      {
        id: 3,
        match_id: 1,
        player_id: 3,
        team_id: 1,
        innings_id: 2,
        runs_scored: 0,
        balls_faced: 0,
        overs_bowled: 4.0,
        runs_conceded: 28,
        wickets_taken: 3,
        economy_rate: 7.00,
        maiden_overs: 0,
        dot_balls: 12,
        is_playing: true,
        created_at: now,
        updated_at: now
      },
      {
        id: 4,
        match_id: 1,
        player_id: 7,
        team_id: 2,
        innings_id: 2,
        runs_scored: 65,
        balls_faced: 42,
        fours: 7,
        sixes: 2,
        strike_rate: 154.76,
        is_out: true,
        dismissal_type: 'bowled',
        catches: 2,
        batting_position: 1,
        is_playing: true,
        created_at: now,
        updated_at: now
      }
    ], {});

    // Partnerships for Match 1, Innings 1
    await queryInterface.bulkInsert('partnerships', [
      {
        id: 1,
        match_id: 1,
        innings_id: 1,
        batsman1_id: 1,
        batsman2_id: 2,
        wicket_number: 1,
        runs: 95,
        balls: 58,
        batsman1_runs: 45,
        batsman2_runs: 50,
        is_active: false,
        created_at: now,
        updated_at: now
      },
      {
        id: 2,
        match_id: 1,
        innings_id: 1,
        batsman1_id: 1,
        batsman2_id: 4,
        wicket_number: 2,
        runs: 42,
        balls: 28,
        batsman1_runs: 27,
        batsman2_runs: 15,
        is_active: false,
        created_at: now,
        updated_at: now
      }
    ], {});
  },

  async down(queryInterface, Sequelize) {
    await queryInterface.bulkDelete('partnerships', null, {});
    await queryInterface.bulkDelete('player_match_stats', null, {});
    await queryInterface.bulkDelete('balls', null, {});
    await queryInterface.bulkDelete('innings', null, {});
  }
};
